(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d226774"],{e97a:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("section",{staticClass:"main-content",attrs:{id:"main-content"}},[t("section",{staticClass:"page-action"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 padding-t_8"},[t("div",{staticClass:"theme-primary partition-full"},[t("span",{staticClass:"p-name text-white"},[e._v(e._s(e.$t("BulkUpload")))]),t("span",{staticClass:"p-actions float-right"},[t("a",{staticClass:"p-action-btn text-white",attrs:{href:"javascript:;",id:"PageTour",title:"Page Tour"},on:{click:function(t){return e.setTourGuideSteps(0)}}},[t("i",{staticClass:"fa fa-road",attrs:{"aria-hidden":"true"}}),t("br"),e._v("Page Tour")])])])])])]),t("div",{staticClass:"user-guide-custom d-none"},[e._v(" "+e._s(e.$t("User_Guide_ExpenseImport"))+" ")]),e.ExpenseDetails?t("div",{staticClass:"border p-3"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-4"},[t("div",{staticClass:"form-group"},[t("label",[e._v(e._s(e.$t("DownloadSampleFile"))+":")]),t("div",{staticClass:"input-group mb-3"},[t("div",{staticClass:"form-control"},[t("i",{staticClass:"fa fa-file-excel-o pr-1 text-success"}),e._v(e._s(e.$t("Expense"))+".xls ")]),e._m(0)])])]),t("div",{staticClass:"col-lg-4"},[t("div",{staticClass:"form-group"},[e._v(" "+e._s(e.$t("UploadFile"))+" "),t("label",[e._v(e._s(e.$t("UploadFile"))+":"),t("span",{staticClass:"text-danger"})]),e._m(1),t("div",{staticClass:"row"},[t("div",{staticClass:"col-9 col-sm-10 col-md-10 col-lg-10 col-xl-10 mb-2 float-left"},[t("div",{staticClass:"custom-file expenseFile"},[t("input",{attrs:{type:"file",name:"FileSrc",id:"flAvatar"},on:{change:function(t){return e.setFile(t)}}})])])])])])]),t("div",{staticClass:"row flex-row-reverse"},[t("div",{staticClass:"col-lg-6 text-right"},[t("a",{staticClass:"btn btn-info formbtn mr-1",attrs:{href:"javascript:void(0);",title:e.$t("ImportFromExcelFile")},on:{click:function(t){return e.UploadExpenseFile()}}},[t("i",{staticClass:"fa fa-file-excel-o mr-2"}),e._v(e._s(e.$t("ImportButton")))]),t("RouterLink",{staticClass:"btn btn-danger formbtn widthhalf",attrs:{to:"/Expenses/Index",title:"Cancel",tabindex:"4"}},[t("i",{staticClass:"fa fa-close pr-2"}),e._v(e._s(e.$t("Cancel")))])],1)])]):e._e(),0==e.ExpenseDetails&&e.expListing.length>0?t("ImportExpenseDeatils",{attrs:{expListing:e.expListing,trips:e.trips,categories:e.categories,projects:e.projects,currencies:e.currencies,tasks:e.tasks,frmFields:e.frmFields}}):e._e()],1)},i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"input-group-append downloadExpense"},[t("span",{staticClass:"input-group-text",attrs:{id:"basic-addon2"}},[t("a",{attrs:{href:"/Content/files/Expense.xls",download:""}},[t("i",{staticClass:"fa fa-download text-primary"})])])])},function(){var e=this,t=e._self._c;return t("a",{attrs:{href:"javascript:;","data-toggle":"popoveruserguide","data-content":"Allowed File Type: .xls, .xlsx"}},[t("i",{staticClass:"fa fa-question-circle-o text-popover",staticStyle:{"font-size":"14px"}})])}],n=a("9769"),r=function(){var e=this,t=e._self._c;return t("section",{staticClass:"main-content",attrs:{id:"divMainListData"}},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("section",{staticClass:"main-content"},[t("div",{staticClass:"container-fluid padding-t_8"},[t("div",{staticClass:"col-12 mb-2 p-0"},[t("div",{staticClass:"mr-2 d-inline-block mt-2"},[t("span",{staticClass:"legend-valid colorboxsquare"}),e._v(" "+e._s(e.$t("Valid"))+" ")]),t("div",{staticClass:"mr-2 d-inline-block mt-2"},[t("span",{staticClass:"legend-expenselimit colorboxsquare"}),e._v(e._s(e.$t("PerDayExpenseExceeded"))+" ")]),t("div",{staticClass:"mr-2 d-inline-block mt-2"},[t("span",{staticClass:"legend-totalexpenselimit colorboxsquare"}),e._v(" "+e._s(e.$t("ExpenseLimitExceeded"))+" ")])]),t("div",{staticClass:"col-md-12 p-0",attrs:{id:"divShowlistingData"}},[t("div",{staticClass:"listing"},[t("Form",{ref:"form",scopedSlots:e._u([{key:"default",fn:function({errors:a,handleSubmit:s}){return[t("div",{staticClass:"table-responsive",staticStyle:{"min-height":"415px"}},[t("table",{staticClass:"sortable bulkexpense table table-bordered dt-responsive nowrap mt-0",attrs:{id:"tblExpList"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{style:{width:12*e.$t("ExpenseDate").length+100+"px"}},[t("span",{style:{"min-width":12*e.$t("ExpenseDate").length+100+"px"}},[e._v(e._s(e.$t("ExpenseDate")))])]),t("th",{style:{width:12*e.$t("Trip").length+100+"px"}},[t("span",{style:{width:12*e.$t("Trip").length+100+"px"}},[e._v(e._s(e.$t("Trip")))])]),t("th",{style:{width:12*e.$t("ExpenseTitle").length+100+"px"}},[t("span",{style:{width:12*e.$t("ExpenseTitle").length+100+"px"}},[e._v(e._s(e.$t("expense_title")))])]),t("th",{style:{width:12*e.$t("Category").length+100+"px"}},[t("span",{style:{width:12*e.$t("Category").length+100+"px"}},[e._v(e._s(e.$t("Category")))])]),t("th",{style:{width:12*e.$t("Project").length+100+"px"}},[t("span",{style:{width:12*e.$t("Project").length+100+"px"}},[e._v(e._s(e.$t("Project")))])]),t("th",{style:{width:12*e.$t("Currency").length+100+"px"}},[t("span",{style:{width:12*e.$t("Currency").length+100+"px"}},[e._v(e._s(e.$t("Currency")))])]),t("th",{style:{width:12*e.$t("Task").length+100+"px"}},[t("span",{style:{width:12*e.$t("Task").length+100+"px"}},[e._v(e._s(e.$t("Task")))])]),t("th",{style:{width:12*e.$t("Amount").length+100+"px"}},[t("span",{style:{width:12*e.$t("Amount").length+100+"px"}},[e._v(e._s(e.$t("Amount")))])]),t("th",{style:{width:12*e.$t("Description").length+100+"px"}},[t("span",{style:{width:12*e.$t("Description").length+100+"px"}},[e._v(e._s(e.$t("Description")))])]),t("th",{style:{width:12*e.$t("Attachment").length+100+"px"}},[t("span",{style:{width:12*e.$t("Attachment").length+100+"px"}},[e._v(e._s(e.$t("Attachment")))])])])]),t("tbody",[null==e.expListing?t("tr",[t("td",{staticClass:"text-center text-danger no-record",attrs:{colspan:"8"}},[e._v(" "+e._s(e.$t("NoRecordfound"))+" ")])]):e._e(),e._l(e.expListing,(function(a,s){return t("tr",{key:s,staticClass:"seletedrow"},[t("td",{staticStyle:{overflow:"visible!important"}},[t("div",{staticClass:"input-group"},[t("Field",{attrs:{name:"datepicker"+s,rules:{required:!1},label:"Date"},scopedSlots:e._u([{key:"default",fn:function({errors:a,changed:i}){return[t("v-date-picker",{staticClass:"input-group",attrs:{"minute-increment":5},on:{"update:modelValue":i},scopedSlots:e._u([{key:"default",fn:function({inputValue:s,inputEvents:i,togglePopover:n}){return[t("input",e._g({class:{"form-control":!0,"is-invalid":a[0]},attrs:{placeholder:"HH:MM:YYYY"},domProps:{value:s}},i)),t("div",{staticClass:"input-group-append",on:{click:function(e){return n()}}},[t("span",{staticClass:"input-group-text"},[t("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0)}),a[0]?t("span",{staticClass:"invalid-feedback",attrs:{name:"datepicker"+s}},[e._v(e._s(a[0]))]):e._e()]}}],null,!0),model:{value:a.expenseDate,callback:function(t){e.$set(a,"expenseDate",t)},expression:"item.expenseDate"}})],1)]),t("td",[t("Field",{attrs:{name:"tripId"+s,label:"Trip"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("select",{directives:[{name:"model",rawName:"v-model",value:a.tripId,expression:"item.tripId"}],class:{"form-control":!0,"is-invalid":i[0]},attrs:{name:"tripId"+s},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a,"tripId",t.target.multiple?s:s[0])}}},[t("option",{attrs:{value:"",selected:"selected",disabled:""}},[e._v("Select Trip")]),e._l(e.trips,(function(a,s){return t("option",{key:s,domProps:{value:String(a.triP_ID)}},[e._v(e._s(a.triP_NAME))])}))],2)]}}],null,!0)})],1),t("td",[t("Field",{attrs:{name:"expenseTitle"+s,rules:{required:!0},label:"Title"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("input",{directives:[{name:"model",rawName:"v-model",value:a.expenseTitle,expression:"item.expenseTitle"}],class:{"form-control":!0,"is-invalid":i[0]},attrs:{name:"expenseTitle"+s,type:"text"},domProps:{value:a.expenseTitle},on:{input:function(t){t.target.composing||e.$set(a,"expenseTitle",t.target.value)}}}),i[0]?t("span",{staticClass:"invalid-feedback",attrs:{name:"expenseTitle"+s}},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)})],1),t("td",{staticClass:"cat"},[t("Field",{attrs:{name:"categoryId"+s,rules:{required:!0},label:"Category"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("select",{directives:[{name:"model",rawName:"v-model",value:a.categoryId,expression:"item.categoryId"}],class:{"form-control":!0,"is-invalid":i[0]},attrs:{name:"categoryId"+s},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a,"categoryId",t.target.multiple?s:s[0])}}},[t("option",{attrs:{value:"",selected:"selected"}},[e._v("Default")]),e._l(e.categories,(function(a,s){return t("option",{key:s,domProps:{value:String(a.expensE_CATEGORY_ID)}},[e._v(e._s(a.categorY_NAME))])}))],2),i[0]?t("span",{staticClass:"invalid-feedback",attrs:{name:"categoryId"+s}},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)})],1),t("td",{staticClass:"pro"},[t("Field",{attrs:{name:"projectId"+s,rules:{required:!0},label:"Project"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("select",{directives:[{name:"model",rawName:"v-model",value:a.projectId,expression:"item.projectId"}],class:{"form-control":!0,"is-invalid":i[0]},attrs:{name:"projectId"+s},on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a,"projectId",t.target.multiple?s:s[0])},function(t){return e.GetTaskByProject(t,a)}]}},[t("option",{attrs:{value:""}},[e._v("Please Select Project")]),e._l(e.projects,(function(a,s){return t("option",{key:s,domProps:{value:a.projectId}},[e._v(e._s(a.projectName))])}))],2),i[0]?t("span",{staticClass:"invalid-feedback",attrs:{name:"projectId"+s}},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)})],1),t("td",{staticClass:"cur"},[t("Field",{attrs:{name:"currencyId"+s,rules:{required:!0},label:"Currency"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("select",{directives:[{name:"model",rawName:"v-model",value:a.currencyId,expression:"item.currencyId"}],class:{"form-control":!0,"is-invalid":i[0]},attrs:{name:"currencyId"+s},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a,"currencyId",t.target.multiple?s:s[0])}}},[t("option",{attrs:{value:"",selected:"selected"}},[e._v("Select Currency")]),e._l(e.currencies,(function(a,s){return t("option",{key:s,domProps:{value:String(a.currencyId)}},[e._v(e._s(a.currency))])}))],2),i[0]?t("span",{staticClass:"invalid-feedback",attrs:{name:"currencyId"+s}},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)})],1),t("td",[t("Field",{attrs:{name:"taskId"+s,rules:{required:!0},label:"Task"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("select",{directives:[{name:"model",rawName:"v-model",value:a.taskId,expression:"item.taskId"}],class:{"form-control":!0,"is-invalid":i[0]},attrs:{name:"taskId"+s},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a,"taskId",t.target.multiple?s:s[0])}}},[t("option",{attrs:{value:"",selected:"selected"}},[e._v("Select Task")]),e._l(a.tasks,(function(a,s){return t("option",{key:s,domProps:{value:String(a.task_id)}},[e._v(e._s(a.task_name))])}))],2),i[0]?t("span",{staticClass:"invalid-feedback",attrs:{name:"taskId"+s}},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)})],1),t("td",[t("Field",{attrs:{name:"expenseAmount"+s,rules:{required:!0},label:"Amount"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("input",{directives:[{name:"model",rawName:"v-model",value:a.expenseAmount,expression:"item.expenseAmount"}],class:{"form-control amt":!0,"is-invalid":i[0]},attrs:{name:"expenseAmount"+s,type:"text"},domProps:{value:a.expenseAmount},on:{input:function(t){t.target.composing||e.$set(a,"expenseAmount",t.target.value)}}}),i[0]?t("span",{staticClass:"invalid-feedback",attrs:{name:"expenseAmount"+s}},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)})],1),t("td",[t("Field",{attrs:{name:"description"+s,rules:{required:!0},label:"Amount"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("textarea",{directives:[{name:"model",rawName:"v-model",value:a.description,expression:"item.description"}],class:{"form-control":!0,"is-invalid":i[0]},attrs:{name:"description"+s,cols:"5",maxlength:"225"},domProps:{value:a.description},on:{input:function(t){t.target.composing||e.$set(a,"description",t.target.value)}}}),e._v(" "),i[0]?t("span",{staticClass:"invalid-feedback",attrs:{name:"description"+s}},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)})],1),t("td",[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0 divFiles",attrs:{id:'@("divFiles" + i)'}},[t("div",{staticClass:"col-lg-12 float-left"},[t("div",{staticClass:"form-group mb-1"},[t("div",{staticClass:"input-group"},[t("div",{staticClass:"custom-file"},[t("input",{staticClass:"uploadbox",attrs:{type:"file","data-file":"multi","data-class":"col-lg-12",size:"10"},on:{change:function(t){return e.onChangeFile(t.target.files)}}})])])])])])])])}))],2)])]),t("div",{staticClass:"text-right mt-3"},[null!=e.expListing?t("a",{staticClass:"btn btn-warning mr-1",attrs:{id:"aValidate",href:"javascript:void(0);",title:e.$t("ValidateExpenseList")},on:{click:function(t){s(),e.ValidateExpense(e.values)}}},[t("i",{staticClass:"fa fa-list pr-2"}),e._v(e._s(e.$t("ValidateExpenseList")))]):e._e(),null!=e.expListing?t("a",{staticClass:"btn btn-success hidden mr-1",attrs:{id:"aEdit",href:"javascript:;",title:e.$t("Edit")},on:{click:e.ExpenseEdit}},[t("i",{staticClass:"fa fa-save pr-2"}),e._v(e._s(e.$t("Edit")))]):e._e(),null!=e.expListing?t("a",{staticClass:"btn btn-success hidden mr-1",attrs:{id:"aSubmit",href:"javascript:void(0);",title:e.$t("ConfirmSubmit")},on:{click:e.OnSubmitExpense}},[t("i",{staticClass:"fa fa-save pr-2"}),e._v(e._s(e.$t("ConfirmSubmit")))]):e._e(),t("a",{staticClass:"btn btn-danger mr-1",attrs:{href:"javascript:void(0)",title:e.$t("Cancel")},on:{click:e.onCancel}},[t("i",{staticClass:"fa fa-close pr-2"}),e._v(e._s(e.$t("Cancel")))])])]}}])})],1)])])])],1)},l=[],o=(a("14d9"),{props:{expListing:{type:Array,required:!0},trips:{type:Array,required:!0},categories:{type:Array,required:!0},projects:{type:Array,required:!0},currencies:{type:Array,required:!0},tasks:{type:Array,required:!0}},data:function(){return{isLoading:!1,expLimitJsonBack:[],check_EXPENSE_LIMIT:!1,userDateFormat:null,frmFields:null,value:null}},created:function(){this.userDateFormat=this.GetUserInfo.DateFormat},methods:{ExpenseEdit:function(){$("#aValidate").removeClass("hidden"),$("#aEdit,#aSubmit").addClass("hidden")},onCancel:function(){this.$router.push({name:"Expense"})},onBlurDatePicker(e,t){setTimeout((function(){var a=$(`div[name="${t}"]`).attr("value");a?($(e.target).removeClass("is-invalid"),$(e.target).parent().parent().find(`span[name='${t}']`).removeClass("d-block").addClass("d-none")):($(e.target).addClass("is-invalid"),$(e.target).parent().next().is("span")&&$(e.target).parent().next().removeClass("d-none"))}),200)},GetTaskByProject(e,t){var a=$(e.target).val(),s="projectId="+a;n["a"].GetTaskByProject(s).then((function(e){t.tasks=e.data}))},ConvertToDate(e){var t=this.userDateFormat,a="M/d/yyyy";try{a=Sys.CultureInfo.CurrentCulture.dateTimeFormat.ShortDatePattern}catch(i){}var s=e.split("/");switch(t){case"MM/dd/yyyy":switch(a){case"M/d/yyyy":return new Date(s[0]+"/"+s[1]+"/"+s[2]);default:return new Date(s[1]+"/"+s[0]+"/"+s[2])}case"dd/MM/yyyy":switch(a){case"M/d/yyyy":return new Date(s[1]+"/"+s[0]+"/"+s[2]);default:return new Date(s[0]+"/"+s[1]+"/"+s[2])}default:break}return new Date(s[0]+"/"+s[1]+"/"+s[2])},ValidateExpense(e){var t=this;t.$refs.form.validate().then(e=>{e&&($("#aValidate").addClass("hidden"),$("#aEdit,#aSubmit").removeClass("hidden"),t.check_EXPENSE_LIMIT=!1,t.GetExpLimitJson(),setTimeout(()=>{t.CheckFile()},1e3))})},GetExpLimitJson(){var e=this;n["a"].GetExpenseLimitAvailableAmount().then((function(t){e.expLimitJsonBack=t.data,e.RowAmtValidation()}))},RowAmtValidation(){var e=!0,t=this;return $("#tblExpList tr.seletedrow").each((function(a,s){var i=$(s).find(".cat select").val(),n=$(s).find(".pro select").val(),r=$(s).find(".pro select :selected").text(),l=$(s).find(".cur select").val(),o=$(s).find("input.date").val(),c=$(s).find("input.amt").val(),d=new Date;if(void 0==i&&(i=$(s).find(".cat input[type=hidden]").val()),void 0==n&&(n=$(s).find(".pro input[type=hidden]").val()),void 0==l&&(l=$(s).find(".cur input[type=hidden]").val()),""==i||""==n||""==l)return!1;if(void 0!=o){if(""==o)return!1;d=t.ConvertToDate(o)}$.each(t.expLimitJsonBack,(function(a,o){o.CURRENCY_ID==l&&o.PROJECT_ID==n&&o.EXPENSE_CATEGORY_ID==i&&new Date(parseInt(o.EXPENSE_LIMIT_FROM.replace("/Date(","")))<=d&&d<new Date(parseInt(o.EXPENSE_LIMIT_TO.replace("/Date(","")))&&(null!=o.EXPENSE_PER_DAY&&parseFloat(c)>parseFloat(o.EXPENSE_PER_DAY)?($(s).removeClass("medium-bar"),$(s).removeClass("high-profile-bar"),$(s).addClass("high-bar"),t.ShowAlert(t.$t("PerDayExpenseLimit",[o.EXPENSE_PER_DAY,r]),"warning",!0,t.$t("Alert")),t.check_EXPENSE_LIMIT=!0,e=!1):0==o.EXPENSE_OVER_LIMIT?parseFloat(o.MAX_AMT)-parseFloat(c)<0?($(s).removeClass("medium-bar"),$(s).removeClass("high-bar"),$(s).addClass("high-profile-bar"),t.ShowAlert(t.$t("TotalExpenseLimit",[o.EXPENSE_MAX,r]),"warning",!0,t.$t("Alert")),t.check_EXPENSE_LIMIT=!0,e=!1):(o.MAX_AMT=parseFloat(o.MAX_AMT)-parseFloat(c),$(s).removeClass("high-profile-bar"),$(s).removeClass("high-bar"),$(s).addClass("medium-bar"),e=!0):($(s).removeClass("high-profile-bar"),$(s).removeClass("high-bar"),$(s).addClass("medium-bar")))})),1==e&&($(s).removeClass("high-profile-bar"),$(s).removeClass("high-bar"),$(s).addClass("medium-bar"))})),t.check_EXPENSE_LIMIT},onChangeFile(e){this.files.append("file",e[0],e[0].name)},CheckFile(){var e=this;e.isLoading=!0;const t=this.files;n["a"].CheckFileSizeAndType(t).then((function(t){e.isLoading=!1}))},OnSubmitExpense(){var e=this;e.$refs.form.validate().then(t=>{if(t&&!e.check_EXPENSE_LIMIT){var a=[];e.expListing.forEach((e,t)=>{var s={};s["ExpenseTitle"]=e.expenseTitle,s["TripId"]=e.tripId?String(e.tripId):"0",s["ExpenseDate"]=e.expenseDate,s["CategoryId"]=e.categoryId?String(e.categoryId):"0",s["ProjectId"]=e.projectId?String(e.projectId):"0",s["CurrencyId"]=e.currencyId?String(e.currencyId):"0",s["TaskId"]=e.taskId?String(e.taskId):"0",s["ExpenseAmount"]=e.expenseAmount?String(e.expenseAmount):"0",s["Description"]=e.description,a.push(s)});const t=new FormData;t.append("postString",JSON.stringify(a)),t.append("files",e.files),n["a"].SaveExpenseBulk(t).then((function(t){e.isLoading=!1,"-1"!=t.data.error?(e.ShowAlert(e.$t("ExpenseAdd",[e.$t("Expense")]),"success",!0,e.$t("Alert")),e.$router.push({name:"Expense"})):e.ShowAlert(e.$t("AddedError",[vueObj.$t("Expense")]),"warning",!0,e.$t("Alert"))}))}})}}}),c=o,d=a("2877"),p=Object(d["a"])(c,r,l,!1,null,null,null),u=p.exports,m={components:{ImportExpenseDeatils:u},data:function(){return{isLoading:!1,file:null,filepath:null,excelFileName:null,reqfrom:null,ExpenseDetails:!0,expListing:null,trips:[],categories:[],projects:[],currencies:[],tasks:[],expLimitJsonBack:[],check_EXPENSE_LIMIT:!1,userDateFormat:null,files:new FormData,frmFields:null,value:null}},created:function(){},methods:{setFile:function(e){this.file=e.target.files[0],this.excelFileName=e.target.files[0].name},UploadExpenseFile(){var e=this;if(""!=$("#flAvatar").val()){var t=$("#flAvatar").val().split("\\").pop(),a=".xls,.xlsx",s=t.replace(/^.*\./,"");if(a.includes(s)){const t=new FormData;t.append("file",e.file),n["a"].ImportExpensePost(t).then((function(t){var a=t.data;0==a.Status?(e.isLoading=!1,e.UploadExpenseDetails(a.Msg),e.ExpenseDetails=!1):(e.isLoading=!1,e.ShowAlert(a.Msg,"warning",!0,e.$t("Alert")))}))}else e.ShowAlert(e.$t("InvalidSampleFileUploadMsg",[t,a]),"warning",!0,e.$t("Alert"))}},UploadExpenseDetails(e){var t=this,a="fullPath="+e;n["a"].UploadExpenseDetails(a).then((function(e){if("success"==e.data.msgFor){var a=e.data;a.listing.forEach((function(e){e.tasks=[],"undefined"!=typeof e.projectId&&null!=e.projectId&&0!=e.projectId||(e.projectId=""),"undefined"!=typeof e.tripId&&null!=e.tripId&&0!=e.tripId||(e.tripId=""),"undefined"!=typeof e.taskId&&null!=e.taskId&&0!=e.taskId||(e.taskId=""),"undefined"!=typeof e.categoryId&&null!=e.categoryId&&0!=e.categoryId||(e.categoryId="")})),t.expListing=a.listing,t.trips=a.Trips,t.projects=a.Projects,t.trips=a.Trips,t.categories=a.Categories,t.projects=a.Projects,t.currencies=a.Currencies}setTimeout((function(){var e={};t.expListing.forEach((t,a)=>{e["datepicker"+a]=t.expenseDate,e["tripId"+a]=t.tripId?String(t.tripId):"",e["expenseTitle"+a]=t.expenseTitle,e["categoryId"+a]=t.categoryId?String(t.categoryId):"0",e["projectId"+a]=t.projectId?String(t.projectId):"",e["currencyId"+a]=t.currencyId?String(t.currencyId):"",e["taskId"+a]=t.taskId?String(t.taskId):"",e["expenseAmount"+a]=t.expenseAmount?String(t.expenseAmount):"",e["description"+a]=t.description})}),1e3)}))}}},v=m,f=Object(d["a"])(v,s,i,!1,null,null,null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d226774.js.map